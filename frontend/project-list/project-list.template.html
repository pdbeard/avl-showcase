<main role="main" class="no-section-nav">
  <section class="section">
    <div class="row pad" id="search">
      <form>
        <fieldset class="fieldset">
          <legend>Search projects</legend>
          <p>Search for projects, yo</p>
          <div class="form-item">
            <div class="form-item-label">
              <label for="search">Search for projects:</label>
            </div>
            <div class="form-item-input">
              <input type="text"
                     name="search"
                     id="search"
                     ng-model="$ctrl.searchString"
                     ng-change="$ctrl.updateSearch()"
                     placeholder="Search projects">
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </section>
  <!--<section class="section bg-gray" id="alerts">
    <div class="row pad">
      <div class="col col-sm-2 col-sm-offset-5 alert alert-success float-alert" role="alert" ng-show="showSuccessAlert">
        <button type="button" class="close" data-ng-click="showSuccessAlert = !showSuccessAlert">×</button>
        <strong>Done!</strong> {{successTextAlert}}
      </div>
      <div class="col col-sm-2 col-sm-offset-5 alert alert-danger float-alert" role="alert" ng-show="showFailAlert">
        <button type="button" class="close" data-ng-click="showFailAlert = !showFailAlert">×</button>
        <strong>Oh no!</strong> {{failTextAlert}}
      </div>
    </div>
  </section>-->

  <section class="section">
    <div class="row pad">
      <div class="grid">
        <div class ="grid-item">
          <div class="two-thirds">
            <h2 class="section-title">
              <span ng-show="$ctrl.searchString.length > 0">Search Results: </span>{{ $ctrl.projects.length }}
              <ng-pluralize count="$ctrl.projects.length"
                            when="{'0': 'Projects', 'one':'Project', 'other': 'Projects'}"></ng-pluralize>
            </h2>
          </div>
          <div class="one-third">
            <select class="form-control" ng-model="$ctrl.sortBy">
              <option value="None">-- Select --</option>
              <option value="title">Title</option>
              <option value="year">Year</option>
            </select>
          </div>
        </div>
      </div>
      <div class="alert alert-warning" ng-if="$ctrl.projects.length === 0 && $ctrl.searchString.length > 0">
        No projects found for "{{ $ctrl.searchString }}"
      </div>
      <div class="grid thirds">
        <!--<div class="grid-item" id="project-{{ project.id }}" ng-repeat="project in projects| startFrom:currentPage*pageSize | limitTo:pageSize track by project.id"
          ng-include="'project.html'">
        </div>-->
        <div class="grid-item"
             id="project-{{ project.id }}"
             ng-repeat="project in $ctrl.projects | orderBy:$ctrl.sortBy track by project.id">
          <div class="panel--interactive">
            <a href="#!/projects/{{ project.id }}" ng-click="showDetails = !showDetails">
              <figure class="media image">
                <img id="image-thumbnail"
                     ng-if="!project.image_ref"
                     alt=""
                     src="https://placehold.it/160x120">
                <img id="image-thumbnail"
                     ng-if="project.image_ref"
                     ng-style="{'background-image':'url({{$ctrl.apiHost}}/image/{{ project.image_ref }})'}">
              </figure>
              <h2 class="title">{{ project.title }}</h2>
              <p>
                {{ project.description | limitTo: 60 }}{{project.description.length > 20 ? '...' : ''}}
              </p>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--<section class="section">
    <div style="text-align: center">
      <a href="#" class="button " title="Previous" ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">Previous</a>      {{currentPage+1}}/{{numberOfPages()}}
      <a href="#" class="button " title="Next" ng-disabled="currentPage >= projects.length/pageSize - 1" ng-click="currentPage=currentPage+1">Next</a>
    </div>
  </section>-->
</main>
