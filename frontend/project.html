

<div class="stop-clicks"  ng-class="{ 'hidden': !showDetails }">

    <div class="row shadow-3 " ng-class="showDetails ? 'project-details' :'project-details-hidden'">
        <div class = "col col-sm-5 addblock">
           <img ng-if="!project.image_ref" src="assets/160x120.png" alt="" class="image-thumbnail-detailed">
           <img ng-if="project.image_ref" ng-src="{{ apiHost }}/image/{{ project.image_ref }}" class="image-thumbnail-detailed">
        </div>
        <div class ="col col-sm-7">
            <h1>
                <b>{{ project.title }}</b>
                from <em>{{ project.year }}</em>
                <button type="button"
                        class="btn btn-sm btn-danger"
                        ng-click="showDetails = !showDetails">Close</button>

            </h1>
            <p class="lead">{{ project.description }}</p>
            <p>
                <ng-pluralize count="project.peopleObjects.length"
                              when="{1: 'Person', 'other': 'People', 'NaN': 'error, yo!'}"></ng-pluralize>:
                <span ng-repeat="person in project.peopleObjects">{{ person.name_first }} {{ person.name_last }}, </span>
            </p>
            <p>
                <ng-pluralize count="project.campus_names.length"
                              when="{1: 'Campus', 'other': 'Campuses', 'NaN': 'error, yo!'}"></ng-pluralize>:
                <span ng-repeat="name in project.campus_names">{{ name }}, </span>
            </p>
            <p ng-if="project.category_names.length">
                <ng-pluralize count="project.category_names.length"
                              when="{1: 'Category', 'other': 'Categories', 'NaN': 'error, yo!'}"></ng-pluralize>:
                <span ng-repeat="name in project.category_names">{{ name }}, </span>
            </p>
            <p ng-if="project.discipline_names.length">
                <ng-pluralize count="project.discipline_names.length"
                              when="{1: 'Discipline', 'other': 'Disciplines', 'NaN': 'error, yo!'}"></ng-pluralize>:
                <span ng-repeat="name in project.discipline_names">{{ name }}, </span>
            </p>
            <p>URL: <a ng-href="{{project.url}}" target="_blank">{{ project.url }}</a></p>
            <p ng-if="project.tags.length">
                <ng-pluralize count="project.tags.length"
                              when="{1: 'Tag', 'other': 'Tags', 'NaN': 'error, yo!'}"></ng-pluralize>:
                <span  class="label label-info"
                       ng-repeat="tag in project.tags">{{ tag }}</span></p>
            <!--<p>ID: <span>{{ project.id }}</span></p>-->
        </div>
    </div><!--END PROJECT DETAILS-->

</div>


<div class ="project-thumbnail shadow-1 row">
    <a href="#" ng-click="showDetails = !showDetails">
        <div class = "col col-sm-5" style="padding-left:0px;">
          <img ng-if="!project.image_ref" src="assets/160x120.png" alt="" class="image-thumbnail">
          <img ng-if="project.image_ref" ng-src="{{ apiHost }}/image/{{ project.image_ref }}" class="image-thumbnail">
        </div>
        <div class ="col col-sm-7">
            <h3>
                <b>{{ project.title }}</b></h3>
            <small class="text-muted">{{ project.description | limitTo: 60 }}{{project.description.length > 20 ? '...' : ''}}</small>
            <p>URL: <a ng-href="{{project.url}}" target="_blank">{{ project.url }}</a></p>
        </div>
    </a>

    <!--Edit Project-->
    <div class ="col col-sm-12" ng-show="guestbookCtrl.isAuthorized.admin">
        <div  ng-init="isEdit=false"
              ng-show="isEdit">
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text"
                        class="form-control"
                        id="title"
                        ng-model="project.title" />
            </div>
            <div class="form-group">
                <label for="text">Project Description</label>
                <textarea class="form-control"
                          id="description"
                          rows="4"
                          ng-model="project.description"></textarea>
            </div>
            <div class="row">
                <div class="form-group form-group col-lg-6">
                    <label for="year">Year</label>
                    <input class="form-control"
                            id="year"
                            ng-model="project.year" />
                </div>
                <div class="form-group form-group col-lg-6">
                    <label for="year">URL</label>
                    <input type="text"
                            class="form-control"
                            id="url"
                            ng-model="project.url"/>
                </div>
            </div>
            <div class="row">
              <div class="form-group col-lg-12">
                <label>People</label>
                <button class="btn btn-default"
                  ng-click="project.peopleObjects.push({name_first: '', name_last: ''})">Add person</button>
              </div>
            </div>
            <div class="row" ng-repeat="person in project.peopleObjects">
              <div class="form-group form-group col-lg-6">
                <label for="year">First</label>
                <input class="form-control"
                          id="year"
                          ng-model="person.name_first"
                          placeholder="First name" />
              </div>
              <div class="form-group form-group col-lg-6">
                <label for="year">Last</label>
                <input type="text"
                          class="form-control"
                          id="url"
                          ng-model="person.name_last"
                          placeholder="Last name" />
              </div>
            </div>
            <div class="row">
                <div class="form-group form-group col-lg-12">
                    <label>Campus</label>
                    <br>
                    <label class="checkbox-inline"
                            ng-repeat="campus in campuses">
                    <input type="checkbox"
                            id="inlineCheckbox1"
                            value="{{campus.id}}"
                            ng-model="project.campuses[$index].checked">{{campus.name}}
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="form-group form-group col-lg-12">
                    <label>Category</label>
                    <br>
                    <label class="checkbox-inline"
                            ng-repeat="category in categories">
                    <input type="checkbox"
                            id="inlineCheckbox1"
                            value="{{category.id}}"
                            ng-model="project.categories[$index].checked">{{category.name}}
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="form-group form-group col-lg-12">
                    <label>Discipline</label>
                    <br>
                    <label class="checkbox-inline"
                            ng-repeat="discipline in disciplines">
                    <input type="checkbox"
                            id="inlineCheckbox1"
                            value="{{discipline.id}}"
                            ng-model="project.disciplines[$index].checked">{{discipline.name}}
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="title">Tags</label>
                <input type="text"
                        class="form-control"
                        id="tags"
                        ng-model="project.tagsString" />
            </div>
            <div class="form-group col-lg-6">
              <label for="blob">Add an Image</label>
              <input type="file" id="blob" accept="image/*" blob="project.imagedata" />
            </div>
            <div class="row">
                <div class="form-group col-lg-6">
                <button type="submit"
                        class="btn btn-success btn-lg btn-block"
                        ng-click="guestbookCtlr.submitEditForm(project)">
                  Submit
                </button>
              </div>
            </div>
        </div>
        <p class="pull-right">
        <button type="button"
                class="btn btn-sm btn-primary"
                ng-click="isEdit = !isEdit">Edit</button>
        <button type="button"
                class="btn btn-sm btn-danger"
                ng-click="guestbookCtlr.deletePost(project)">Delete</button>
        </p>

    </div><!--admin show-->
</div>

