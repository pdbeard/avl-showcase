<!DOCTYPE html>
<html ng-app="app">

  <head>
    <meta charset="utf-8" />
    <title>AVL Showcase Prototype</title>
    <link type="text/css" rel="stylesheet" href="bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="custom.css" />
    <script type="application/javascript" src="angular.js"></script>
    <script type="application/javascript" src="app.js"></script>
  </head>
  <body>

    <div class="container">
      <div ng-controller="GuestbookController as guestbookCtlr">
        <div class="header clearfix">
          <nav>
            <ul class="nav nav-pills pull-right">
            <button type="button"
              class="btn btn-sm btn-warning"
              ng-click="guestbookCtrl.isAuthorized.admin = !guestbookCtrl.isAuthorized.admin">Admin Mode</button>
            </ul>
          </nav>
          <h3 class="">AVL Showcase</h3>
        </div>

        <div class="row marketing">
          <div class="col-lg-12">
            <form id="search-form" class="form-inline clearfix">
              <div class="form-group">
                <input type="text"
                      class="form-control"
                      id="query_string"
                      ng-model="search.query_string"
                      placeholder="Search projects" />
                <button type="button" class="btn btn-danger"
                        ng-if="search.query_string.length > 0"
                        ng-click="guestbookCtlr.clearSearch()">x</button>
              </div>
            </form>

              <!--Add new item form-->
              <div ng-show="guestbookCtrl.isAuthorized.admin">
              <div class="form-group">
                <label for="title">Title</label>
                <input type="text"
                      class="form-control"
                      id="title"
                      ng-model="formdata.title"
                      placeholder="Enter the title" />
              </div>
              <div class="form-group">
                <label for="text">Project Description</label>
                <textarea class="form-control"
                          id="description"
                          rows="4"
                          ng-model="formdata.description"
                          placeholder="Enter a short description of the project"></textarea>
              </div>
              <div class="row">
                <div class="form-group form-group col-lg-6">
                  <label for="year">Year</label>
                  <input class="form-control"
                            id="year"
                            ng-model="formdata.year"
                            placeholder="Enter year as YYYY" />
                </div>
                <div class="form-group form-group col-lg-6">
                  <label for="year">URL</label>
                  <input type="text"
                            class="form-control"
                            id="url"
                            ng-model="formdata.url;"
                            placeholder="Enter the project page URL" />
                </div>
              </div>
              <div class="row">
                <div class="form-group col-lg-12">
                  <label>People</label>
                  <button class="btn btn-default"
                    ng-click="formdata.peopleObjects.push({name_first: '', name_last: ''})">Add person</button>
                </div>
              </div>
              <div class="row" ng-repeat="person in formdata.peopleObjects">
                <div class="form-group form-group col-lg-6">
                  <label for="year">First</label>
                  <input class="form-control"
                            id="year"
                            ng-model="person.name_first"
                            placeholder="First name" />
                </div>
                <div class="form-group form-group col-lg-6">
                  <label for="year">Last</label>
                  <input type="text"
                            class="form-control"
                            id="url"
                            ng-model="person.name_last"
                            placeholder="Last name" />
                </div>
              </div>
              <div class="row">
                <div class="form-group form-group col-lg-12">
                  <label>Campus</label>
                  <br>
                  <label class="checkbox-inline" ng-repeat="campus in campuses">
                    <input type="checkbox"
                      id="inlineCheckbox1"
                      value="{{campus.id}}"
                      ng-model="formdata.campus_checkbox[$index].checked">{{campus.name}}
                  </label>
                </div>
              </div>
              <div class="row">
                <div class="form-group form-group col-lg-12">
                  <label>Category</label>
                  <br>
                  <label class="checkbox-inline" ng-repeat="category in categories">
                    <input type="checkbox"
                      id="inlineCheckbox2"
                      value="{{category.id}}"
                      ng-model="formdata.category_checkbox[$index].checked">{{category.name}}
                  </label>
                </div>
              </div>
                <div class="form-group">
                  <label for="title">Tags</label>
                  <input type="text"
                        class="form-control"
                        id="tags"
                        ng-model="formdata.tags"
                        placeholder="Enter tags separated by commas" />
                </div>
                <div class="row">
                  <div class="form-group col-lg-6">
                    <label for="blob">Add an Image</label>
                    <input type="file"
                          id="blob"
                          accept="image/*"
                          blob="imagedata" />
                  </div>

                  <div class="form-group col-lg-6">
                    <button type="submit"
                            class="btn btn-success btn-lg btn-block"
                            ng-click="guestbookCtlr.submitForm()">Submit
                    </button>
                  </div>
                </div>
              </div><!--End Add new item-->
          </div><!--col-->
        </div><!--row-->

        <div class="row marketing">
          <div class="col-lg-12">
            <h2 class="post-item">
              <span ng-show="search.query_string.length > 0">Search Results: </span>{{ projects.length }}
              <ng-pluralize count="projects.length"
                            when="{'0': 'Projects', 'one':'Project', 'other': 'Projects'}"></ng-pluralize>
            </h2>
            <div class="alert alert-info"
                ng-if="projects.length === 0 && search.query_string.length === 0">Be the first one to post something!</div>
            <div class="alert alert-warning"
                ng-if="projects.length === 0 && search.query_string.length > 0">No projects for search "{{ search.query_string }}" found.</div>
            <div class="post-list">

                    <div class="col-lg-5 post-item"
                         id="project-{{ project.id }}"
                         ng-repeat="project in projects track by project.id"
                         ng-include="'project.html'"></div>

            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <p>&copy; 2015-2016 <a href="https://crate.io">Crate.IO</a></p>
      </footer>
    </div> <!-- /container -->
  </body>
</html>
